var endPoint=options.endPoint,formID=options.formID,iID=options.iframe,iH=options.iHeight,iExists=!1,previewUnselected=function(i){return i.preventDefault(),$("#preview-container").hide(),$("#"+iID).remove(),iExists=!1},previewSelected=function(i){i.preventDefault(),$("#preview-container").show();var e=$(i.currentTarget).val(),o=endPoint.indexOf("?")>=0?"&":"?",t=endPoint+o+$.param({id:formID,theme_id:e},!0);if(iExists!==!0){var l=$("<iframe></iframe>").attr({src:t,id:iID,frameborder:0,width:"100%",height:iH});return $("#preview").html(l),iExists=!0}$("#"+iID).attr("src",t)};$("#resizeFull").click(function(i){if(i.preventDefault(),iExists){var e=$("#"+iID);e.height(e.contents().find("html").height()),$(".toogleButton").toggle()}}),$("#resizeSmall").click(function(i){i.preventDefault(),iExists&&($("#"+iID).height(iH),$(".toogleButton").toggle())}),$(document).ready(function(){var i=function(i){var e=$.summernote.ui,o=e.button({contents:'<i class="note-icon-question"/>',tooltip:"Help",click:function(){var e=$.summernote.ui,o=$(document.body),t=i.options,l=t.langInfo,n=navigator.platform.toUpperCase().indexOf("MAC")>=0;this.createShortCutList=function(){var e=t.keyMap[n?"mac":"pc"];return Object.keys(e).map(function(o){var t=e[o],l=$('<div><div class="help-list-item"/></div>');return l.append($("<label><kbd>"+o+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(i.memo("help."+t)||t)),l.html()}).join("")},this.$dialog=e.dialog({title:l.options.help,fade:t.dialogsFade,body:this.createShortCutList(),footer:" ",callback:function(i){i.find(".modal-body").css({"max-height":300,"overflow-y":"scroll"})}}).render().appendTo(o),e.showDialog(this.$dialog)}});return o.render()};$("#formconfirmation-mail_message, #formemail-message").summernote({height:300,toolbar:[["style",["style"]],["do",["undo","redo"]],["font_style",["bold","italic","underline","clear"]],["fontname",["fontname"]],["font",["color"]],["para",["ol","ul","paragraph"]],["table",["table"]],["insert",["picture","link","video","hr"]],["misc",["codeview","customHelp"]]],buttons:{customHelp:i}}),toggleSchedule=function(i){"0"===i.val()?($(".field-form-schedule_start_date").hide(),$(".field-form-schedule_end_date").hide()):($(".field-form-schedule_start_date").show(),$(".field-form-schedule_end_date").show())},togglePassword=function(i){$("#form-use_password").is(":checked")===!1?$(".field-form-password").hide():$(".field-form-password").show()},toggleUrls=function(i){$("#form-authorized_urls").is(":checked")===!1?$(".field-form-urls").hide():$(".field-form-urls").show()},toggleTotalLimit=function(i){"0"===i.val()?($(".field-form-total_limit_number").hide(),$(".field-form-total_limit_period").hide()):($(".field-form-total_limit_number").show(),$(".field-form-total_limit_period").show())},toggleIPLimit=function(i){"0"===i.val()?($(".field-form-ip_limit_number").hide(),$(".field-form-ip_limit_period").hide()):($(".field-form-ip_limit_number").show(),$(".field-form-ip_limit_period").show())},toggleFormConfirmationFields=function(i){"0"===i.val()||"1"===i.val()?($(".field-formconfirmation-message").show(),$(".field-formconfirmation-url").hide()):"2"===i.val()&&($(".field-formconfirmation-message").hide(),$(".field-formconfirmation-url").show())},toggleFormConfirmationEmailFields=function(i){"0"===i.val()?($(".field-formconfirmation-mail_to").hide(),$(".field-formconfirmation-mail_from").hide(),$(".field-formconfirmation-mail_from_name").hide(),$(".field-formconfirmation-mail_subject").hide(),$(".field-formconfirmation-mail_message").hide(),$(".field-formconfirmation-mail_receipt_copy").hide()):"1"===i.val()&&($(".field-formconfirmation-mail_to").show(),$(".field-formconfirmation-mail_from").show(),$(".field-formconfirmation-mail_from_name").show(),$(".field-formconfirmation-mail_subject").show(),$(".field-formconfirmation-mail_message").show(),$(".field-formconfirmation-mail_receipt_copy").show())},toggleFormEmailFields=function(i){"2"===i.val()?$(".field-formemail-message").show():$(".field-formemail-message").hide()},$("#form-schedule").find(".btn").on("click",function(i){toggleSchedule($(this).children())}),$("#form-total_limit").find(".btn").on("click",function(i){toggleTotalLimit($(this).children())}),$("#form-ip_limit").find(".btn").on("click",function(i){toggleIPLimit($(this).children())}),$("#formconfirmation-type").find(".btn").on("click",function(i){toggleFormConfirmationFields($(this).children())}),$("#formconfirmation-send_email").find(".btn").on("click",function(i){toggleFormConfirmationEmailFields($(this).children())}),$("#formemail-type").find(".btn").on("click",function(i){toggleFormEmailFields($(this).children())}),toggleSchedule($('[name$="Form[schedule]"]:checked')),togglePassword(),toggleUrls(),toggleTotalLimit($('[name$="Form[total_limit]"]:checked')),toggleIPLimit($('[name$="Form[ip_limit]"]:checked')),toggleFormConfirmationFields($('[name$="FormConfirmation[type]"]:checked')),toggleFormConfirmationEmailFields($('[name$="FormConfirmation[send_email]"]:checked')),toggleFormEmailFields($('[name$="FormEmail[type]"]:checked'))});