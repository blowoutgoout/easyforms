jQuery(document).ready(function(){Function.prototype.getHashCode=function(e){return function(){return this.hashCode||(this.hashCode="<hash|#"+e+++">"),this.hashCode}}(0);var e=function(e){return $(e)},t=function(e){var t=e.split("_",1);return"checkbox"==t?$("input[name*='"+e+"[]']"):"radio"==t?$("input[name*='"+e+"']"):$("#"+e)},i=function(e){var t=e.split("_",1);return"radio"==t?$("input[name='"+e+"']:checked"):"checkbox"==t?$("input[name*='"+e+"[]']:checked"):$("#"+e)},n=function(t){return"field"==t.find("original")?i(t.find("original","originalField")):e(t.find("original","originalElement"))},a=function(i,n){var a="field"==i.find("target")?t(i.find("target","targetField")):e(i.find("target","targetElement")),r=n.is(":input")?n.val():n.html();n.size()>1&&(r=n.map(function(){return $(this).is(":input")?$(this).val():$(this).text()}).get().join(", ")),a.size()>1?a.is(":radio, :checkbox")?n.size()>1?($(":checkbox[name*='"+a.attr("name")+"']").prop("checked",!1),$.each(n,function(){$(this).is(":checkbox")&&(r=$(this).val(),$(":checkbox[name*='"+a.attr("name")+"'][value*='"+r+"']").prop("checked",!0))})):($(":input[name*='"+a.attr("name")+"']").prop("checked",!1),$(":input[name*='"+a.attr("name")+"'][value*='"+r+"']").prop("checked",!0)):a.is(":input")?a.val(r):a.text(r):a.is(":radio, :checkbox")?($(":input[name*='"+a.attr("name")+"']").prop("checked",!1),$(":input[name*='"+a.attr("name")+"'][value*='"+r+"']").prop("checked",!0)):a.is(":input")?a.val(r):a.html(r)},r=function(i,n){if("field"==i.find("target"))t(i.find("target","targetField")).val(n);else if("element"==i.find("target")){var a=e(i.find("target","targetElement"));a.size()>1?$.each(a,function(){$(this).is(":input")?$(this).val(n):$(this).text(n)}):a.is(":input")?a.val(n):a.text(n)}},o=function(e){var t=e.find("operator"),n=e.find("operands"),a=NaN;return t&&($.isArray(n)&&$.each(n,function(e,n){var r=i(n);if(r.size()>1)$.each(r,function(e,i){var n=parseFloat($(i).val());if(!isNaN(n))if(isNaN(a))a=n;else switch(t){case"+":a+=n;break;case"-":a-=n;break;case"*":a*=n;break;case"/":a/=n;break;case"%":a%=n}});else if(1==r.size()){var o=parseFloat(r.val());if(!isNaN(o))if(isNaN(a))a=o;else switch(t){case"+":a+=o;break;case"-":a-=o;break;case"*":a*=o;break;case"/":a/=o;break;case"%":a%=o}}}),isNaN(a)&&(a=0),r(e,a)),0},s=function(){var i={},s=$("body"),c=s.outerHeight(!0);$.each(options.fieldIds,function(e,t){var n=t.split("_",1);if("checkbox"==n)i[t]=$("#"+t).is(":checked");else if("radio"==n){var a=t.split("_",2)[0]+"_"+t.split("_",2)[1];i[a]=$("input[name='"+a+"']:checked").val()}else i[t]="button"==n?$("#"+t).data("clicked"):$("#"+t).val()});var d={toShow:function(i){"field"==i.find("target")?t(i.find("target","targetField")).show().parent().closest("div.form-group").show():"element"==i.find("target")&&e(i.find("target","targetElement")).show()},toHide:function(i){"field"==i.find("target")?t(i.find("target","targetField")).hide().parent().closest("div.form-group").hide():"element"==i.find("target")&&e(i.find("target","targetElement")).hide()},toEnable:function(i){if("field"==i.find("target"))t(i.find("target","targetField")).prop("disabled",!1);else"element"==i.find("target")&&e(i.find("target","targetElement")).prop("disabled",!1)},toDisable:function(i){if("field"==i.find("target"))t(i.find("target","targetField")).prop("disabled",!0);else"element"==i.find("target")&&e(i.find("target","targetElement")).prop("disabled",!0)},performArithmeticOperations:function(e){o(e)},resetResult:function(e){if(options.submitted)return!1;r(e,0)},copy:function(e){var t=n(e);a(e,t)},skip:function(e,t){0==$.grep(options.skips,function(e){return e.id==t}).length&&options.skips.push({id:t,from:null,to:parseInt(e.find("step"))})},resetSkip:function(e,t){options.skips=$.grep(options.skips,function(e){return e.id!=t})},formatNumber:function(i){if("field"==i.find("target")){var n=t(i.find("target","targetField")),a=numeral(n.val()).format(i.find("format"));n.val(a)}else if("element"==i.find("target")){var r=e(i.find("target","targetElement")),o=numeral(r.text()).format(i.find("format"));r.text(o)}}};$.each(options.rules,function(e,t){var n=new RuleEngine({conditions:JSON.parse(t.conditions),actions:JSON.parse(t.actions)}),a=t.opposite?{toShow:"toHide",toHide:"toShow",toEnable:"toDisable",toDisable:"toEnable",performArithmeticOperations:"resetResult",skip:"resetSkip"}:{};n.run(i,d,a)});var f=s.outerHeight(!0);c!=f&&Utils.postMessage({height:f})};$(window).load(function(){s()});var c=$("form");c.find(":input").on("keyup change click input",function(){s()}),c.on("success",function(){s()}),c.find(":button").mousedown(function(){$(this).data("clicked",!0)})});